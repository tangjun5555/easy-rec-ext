{
    "model_dir": "fibinet_v1/ckpt",
    "train_config": {
        "optimizer_config": {
            "optimizer_type": "adagrad_optimizer",
            "adagrad_optimizer": {
                "learning_rate": {
                    "learning_rate_type": "exponential_decay_learning_rate",
                    "exponential_decay_learning_rate": {
                        "initial_learning_rate": 0.1,
                        "decay_steps": 10000,
                        "decay_factor": 0.95,
                        "min_learning_rate": 0.001
                    }
                }
            }
        },
        "log_step_count_steps": 500,
        "save_checkpoints_steps": 5000,
        "keep_checkpoint_max": 2
    },
    "eval_config": {
        "metric_set": [
            {
                "name": "auc"
            },
            {
                "name": "pcopc"
            },
            {
                "name": "gauc",
                "gid_field": "device_id"
            }
        ]
    },
    "export_config": {
        "export_dir": "fibinet_v1/export"
    },
    "input_config": {
        "input_fields": [
            {
                "input_name": "id",
                "input_type": "string"
            },
            {
                "input_name": "label",
                "input_type": "int"
            },
            {
                "input_name": "hour",
                "input_type": "int"
            },
            {
                "input_name": "c1",
                "input_type": "int"
            },
            {
                "input_name": "banner_pos",
                "input_type": "int"
            },
            {
                "input_name": "site_id",
                "input_type": "string"
            },
            {
                "input_name": "site_domain",
                "input_type": "string"
            },
            {
                "input_name": "site_category",
                "input_type": "string"
            },
            {
                "input_name": "app_id",
                "input_type": "string"
            },
            {
                "input_name": "app_domain",
                "input_type": "string"
            },
            {
                "input_name": "app_category",
                "input_type": "string"
            },
            {
                "input_name": "device_id",
                "input_type": "string"
            },
            {
                "input_name": "device_ip",
                "input_type": "string"
            },
            {
                "input_name": "device_model",
                "input_type": "string"
            },
            {
                "input_name": "device_type",
                "input_type": "int"
            },
            {
                "input_name": "device_conn_type",
                "input_type": "int"
            },
            {
                "input_name": "c14",
                "input_type": "int"
            },
            {
                "input_name": "c15",
                "input_type": "int"
            },
            {
                "input_name": "c16",
                "input_type": "int"
            },
            {
                "input_name": "c17",
                "input_type": "int"
            },
            {
                "input_name": "c18",
                "input_type": "int"
            },
            {
                "input_name": "c19",
                "input_type": "int"
            },
            {
                "input_name": "c20",
                "input_type": "int"
            },
            {
                "input_name": "c21",
                "input_type": "int"
            }
        ],
        "label_fields": [
            "label"
        ],
        "input_type": "csv",
        "input_separator": ",",
        "num_epochs": 2,
        "batch_size": 256
    },
    "feature_config": {
        "feature_fields": [
            {
                "input_name": "c1",
                "feature_type": "IdFeature",
                "embedding_dim": 16,
                "num_buckets": 2000
            },
            {
                "input_name": "banner_pos",
                "feature_type": "IdFeature",
                "embedding_dim": 16,
                "num_buckets": 100
            },
            {
                "input_name": "site_id",
                "feature_type": "IdFeature",
                "embedding_dim": 16,
                "hash_bucket_size": 1000000
            },
            {
                "input_name": "site_domain",
                "feature_type": "IdFeature",
                "embedding_dim": 16,
                "hash_bucket_size": 500000
            },
            {
                "input_name": "site_category",
                "feature_type": "IdFeature",
                "embedding_dim": 16,
                "hash_bucket_size": 100000
            },
            {
                "input_name": "app_id",
                "feature_type": "IdFeature",
                "embedding_dim": 16,
                "hash_bucket_size": 1000000
            },
            {
                "input_name": "app_domain",
                "feature_type": "IdFeature",
                "embedding_dim": 16,
                "hash_bucket_size": 500000
            },
            {
                "input_name": "app_category",
                "feature_type": "IdFeature",
                "embedding_dim": 16,
                "hash_bucket_size": 100000
            },
            {
                "input_name": "device_id",
                "feature_type": "IdFeature",
                "embedding_dim": 16,
                "hash_bucket_size": 1000000
            },
            {
                "input_name": "device_ip",
                "feature_type": "IdFeature",
                "embedding_dim": 16,
                "hash_bucket_size": 500000
            },
            {
                "input_name": "device_model",
                "feature_type": "IdFeature",
                "embedding_dim": 16,
                "hash_bucket_size": 100000
            },
            {
                "input_name": "device_type",
                "feature_type": "IdFeature",
                "embedding_dim": 16,
                "num_buckets": 1000
            },
            {
                "input_name": "device_conn_type",
                "feature_type": "IdFeature",
                "embedding_dim": 16,
                "num_buckets": 100
            },
            {
                "input_name": "c14",
                "feature_type": "IdFeature",
                "embedding_dim": 16,
                "num_buckets": 30000
            },
            {
                "input_name": "c15",
                "feature_type": "IdFeature",
                "embedding_dim": 16,
                "num_buckets": 2000
            },
            {
                "input_name": "c16",
                "feature_type": "IdFeature",
                "embedding_dim": 16,
                "num_buckets": 2000
            },
            {
                "input_name": "c17",
                "feature_type": "IdFeature",
                "embedding_dim": 16,
                "num_buckets": 3000
            },
            {
                "input_name": "c18",
                "feature_type": "IdFeature",
                "embedding_dim": 16,
                "num_buckets": 1000
            },
            {
                "input_name": "c19",
                "feature_type": "IdFeature",
                "embedding_dim": 16,
                "num_buckets": 2000
            },
            {
                "input_name": "c20",
                "feature_type": "IdFeature",
                "embedding_dim": 16,
                "num_buckets": 110000
            },
            {
                "input_name": "c21",
                "feature_type": "IdFeature",
                "embedding_dim": 16,
                "num_buckets": 1000
            }
        ]
    },
    "model_config": {
        "model_class": "fibinet",
        "feature_groups": [
            {
                "group_name": "fibinet_1",
                "feature_names": [
                    "c1",
                    "banner_pos",
                    "site_id",
                    "site_domain",
                    "site_category",
                    "app_id",
                    "app_domain",
                    "app_category",
                    "device_id",
                    "device_ip",
                    "device_model",
                    "device_type",
                    "device_conn_type",
                    "c14",
                    "c15",
                    "c16",
                    "c17",
                    "c18",
                    "c19",
                    "c20",
                    "c21"
                ]
            }
        ],
        "fibitnet_towers": [
            {
                "input_group": "fibinet_1",
                "fibinet_config": {
                    "senet_reduction_ratio": 1.2,
                    "bilinear_type": "Field-All"
                }
            }
        ],
        "final_dnn": {
            "hidden_units": [
                300,
                200,
                100
            ]
        }
    }
}